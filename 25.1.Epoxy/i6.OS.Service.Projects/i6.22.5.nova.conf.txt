# i6.22.4.nova.conf.txt
#
# to be copied to:
# /etc/nova/nova.conf
#
# https://docs.openstack.org/nova/2025.1/configuration/index.html
# https://docs.openstack.org/nova/2025.1/admin/configuration/index.html
# https://docs.openstack.org/nova/2025.1/configuration/sample-config.html
# https://docs.openstack.org/nova/2025.1/_static/nova.conf.sample
#

[DEFAULT]
log_dir = /var/log/nova

# transport_url = rabbit://openstack:RABBIT_PASS@controller:5672/
transport_url = rabbit://openstack:openstack@controller:5672/

my_ip = 10.0.0.11

# Suggestions by Grok 2025/Oct/20
use_neutron = true
firewall_driver = nova.virt.firewall.NoopFirewallDriver
# log_dir = /var/log/nova
# Explicitly set if needed
#

# Due to error msgs in nova-scheduler & nova-conductor
# Suggestion by Grok 2025/Oct/26
# ... (existing settings)
servicegroup_driver = mc
memcached_servers = controller:11211

[api_database]
# connection = mysql+pymysql://nova:NOVA_DBPASS@controller/nova_api
connection = mysql+pymysql://nova:openstack@controller/nova_api

[database]
# connection = mysql+pymysql://nova:NOVA_DBPASS@controller/nova
connection = mysql+pymysql://nova:openstack@controller/nova

[api]
auth_strategy = keystone

[keystone_authtoken]
www_authenticate_uri = http://controller:5000/
auth_url = http://controller:5000/
memcached_servers = controller:11211
auth_type = password
project_domain_name = Default
user_domain_name = Default
project_name = service
username = nova
# password = NOVA_PASS
password = openstack

# Suggestion by Grok 2025/Oct/26
service_token_roles_required = true

[service_user]
send_service_user_token = true
auth_url = https://controller/identity
auth_strategy = keystone
auth_type = password
project_domain_name = Default
project_name = service
user_domain_name = Default
username = nova
# password = NOVA_PASS
password = openstack

[neutron]
url = http://controller:9696
auth_url = http://controller:5000
auth_type = password
project_domain_name = Default
user_domain_name = Default
region_name = RegionOne
project_name = service
username = neutron
# password = NEUTRON_PASS
password = openstack
service_metadata_proxy = true
# metadata_proxy_shared_secret = METADATA_SECRET
metadata_proxy_shared_secret = openstack

[vnc]
enabled = true
server_listen = $my_ip
server_proxyclient_address = $my_ip

# Suggestions by Grok 
#vncserver_listen = 0.0.0.0
#vncserver_proxyclient_address = 10.0.0.11
#vncserver_proxyclient_address = <controller_management_ip>
novncproxy_base_url = http://10.0.0.11:6080/vnc.html
#novncproxy_base_url = http://<controller_public_ip>:6080/vnc_auto.html
#novncproxy_host = 0.0.0.0
#novncproxy_port = 6080
# Explicitly set the path if not using default
# novncproxy_web = /usr/share/novnc  # Uncomment if needed

# due to Glance API Servers Deprecation
# Suggestion by Gro 2025/Oct/26
#[glance]
#api_servers = http://controller:9292

[oslo_concurrency]
lock_path = /var/lib/nova/tmp

[placement]
region_name = RegionOne
project_domain_name = Default
project_name = service
auth_type = password
user_domain_name = Default
auth_url = http://controller:5000/v3
username = placement
# password = PLACEMENT_PASS
password = openstack

# Suggestion by Grok 2025/Oct/26
[cache]
enabled = true
backend = oslo_cache.memcache_pool
memcache_servers = controller:11211
